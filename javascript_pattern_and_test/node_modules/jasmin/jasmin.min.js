(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?module.exports=b():'function'==typeof define&&define.amd?define(b):a.jasmin=b()})(this,function(){'use strict';function a(a){!h&&k.createRange&&(h=k.createRange(),h.selectNode(k.body));var b;return h&&h.createContextualFragment?b=h.createContextualFragment(a):(b=k.createElement('body'),b.innerHTML=a),b.childNodes[0]}function b(a,b){var c=a.nodeName,d=b.nodeName;return!(c!==d)||b.actualize&&91>c.charCodeAt(0)&&90<d.charCodeAt(0)&&c===d.toUpperCase()}function c(a,b){return b&&b!==j?k.createElementNS(b,a):k.createElement(a)}function d(a,b){for(var c=a.firstChild;c;){var d=c.nextSibling;b.appendChild(c),c=d}return b}function e(a,b,c){a[c]!==b[c]&&(a[c]=b[c],a[c]?a.setAttribute(c,''):a.removeAttribute(c,''))}function f(){}function g(a){return a.id}var h,i,j='http://www.w3.org/1999/xhtml',k='undefined'==typeof document?void 0:document,l=k?k.body||k.createElement('div'):{};i=l.hasAttributeNS?function(a,b,c){return a.hasAttributeNS(b,c)}:l.hasAttribute?function(a,b,c){return a.hasAttribute(c)}:function(a,b,c){return null!=a.getAttributeNode(b,c)};var m=i,n={OPTION:function(a,b){e(a,b,'selected')},INPUT:function(a,b){e(a,b,'checked'),e(a,b,'disabled'),a.value!==b.value&&(a.value=b.value),m(b,null,'value')||a.removeAttribute('value')},TEXTAREA:function(a,b){var c=b.value;a.value!==c&&(a.value=c);var d=a.firstChild;if(d){var e=d.nodeValue;if(e==c||!c&&e==a.placeholder)return;d.nodeValue=c}},SELECT:function(a,b){if(!m(b,null,'multiple')){for(var c=0,d=b.firstChild;d;){var e=d.nodeName;if(e&&'OPTION'===e.toUpperCase()){if(m(d,null,'selected'))break;c++}d=d.nextSibling}a.selectedIndex=c}}},o=1,p=3,q=8,r=function(e){return function(h,j,l){function m(a){x?x.push(a):x=[a]}function r(a,b){if(a.nodeType===o)for(var c,d=a.firstChild;d;)c=void 0,b&&(c=y(d))?m(c):(E(d),d.firstChild&&r(d,b)),d=d.nextSibling}function s(a,b,c){!1===D(a)||(b&&b.removeChild(a),E(a),r(a,c))}function t(a){if(a.nodeType===o)for(var b,c=a.firstChild;c;)b=y(c),b&&(H[b]=c),t(c),c=c.nextSibling}function u(a){A(a);for(var c=a.firstChild;c;){var d=c.nextSibling,e=y(c);if(e){var f=H[e];f&&b(c,f)&&(c.parentNode.replaceChild(f,c),v(f,c))}u(c),c=d}}function v(a,c,d){var f,g=y(c);if(g&&delete H[g],!(j.isSameNode&&j.isSameNode(h))){if(!d){if(!1===B(a,c))return;if(e(a,c),C(a),!1===F(a,c))return}if('TEXTAREA'!==a.nodeName){var i,l,r,t,w=c.firstChild,x=a.firstChild;outer:for(;w;){for(r=w.nextSibling,i=y(w);x;){if(l=x.nextSibling,w.isSameNode&&w.isSameNode(x)){w=r,x=l;continue outer}f=y(x);var A=x.nodeType,D=void 0;if(A===w.nodeType&&(A===o?(i?i!==f&&((t=H[i])?x.nextSibling===t?D=!1:(a.insertBefore(t,x),l=x.nextSibling,f?m(f):s(x,a,!0),x=t):D=!1):f&&(D=!1),D=!1!==D&&b(x,w),D&&v(x,w)):(A===p||A==q)&&(D=!0,x.nodeValue!==w.nodeValue&&(x.nodeValue=w.nodeValue))),D){w=r,x=l;continue outer}f?m(f):s(x,a,!0),x=l}if(i&&(t=H[i])&&b(t,w))a.appendChild(t),v(t,w);else{var E=z(w);!1!==E&&(E&&(w=E),w.actualize&&(w=w.actualize(a.ownerDocument||k)),a.appendChild(w),u(w))}w=r,x=l}for(;x;)l=x.nextSibling,(f=y(x))?m(f):s(x,a,!0),x=l}var G=n[a.nodeName];G&&G(a,c)}}if(l||(l={}),'string'==typeof j)if('#document'===h.nodeName||'HTML'===h.nodeName){var w=j;j=k.createElement('html'),j.innerHTML=w}else j=a(j);var x,y=l.getNodeKey||g,z=l.onBeforeNodeAdded||f,A=l.onNodeAdded||f,B=l.onBeforeElUpdated||f,C=l.onElUpdated||f,D=l.onBeforeNodeDiscarded||f,E=l.onNodeDiscarded||f,F=l.onBeforeElChildrenUpdated||f,G=!0===l.childrenOnly,H={};t(h);var I=h,J=I.nodeType,K=j.nodeType;if(!G)if(J===o)K===o?!b(h,j)&&(E(h),I=d(h,c(j.nodeName,j.namespaceURI))):I=j;else if(J===p||J===q){if(K===J)return I.nodeValue!==j.nodeValue&&(I.nodeValue=j.nodeValue),I;I=j}if(I===j)E(h);else if(v(I,j,G),x)for(var L,M=0,i=x.length;M<i;M++)L=H[x[M]],L&&s(L,L.parentNode,!1);return!G&&I!==h&&h.parentNode&&(I.actualize&&(I=I.actualize(h.ownerDocument||k)),h.parentNode.replaceChild(I,h)),I}}(function(a,b){var c,d,e,f,g,h,i=b.attributes;for(c=i.length-1;0<=c;--c)d=i[c],e=d.name,f=d.namespaceURI,g=d.value,f?(e=d.localName||e,h=a.getAttributeNS(f,e),h!==g&&a.setAttributeNS(f,e,g)):(h=a.getAttribute(e),h!==g&&a.setAttribute(e,g));for(i=a.attributes,c=i.length-1;0<=c;--c)d=i[c],!1!==d.specified&&(e=d.name,f=d.namespaceURI,f?(e=d.localName||e,!m(b,f,e)&&a.removeAttributeNS(f,e)):!m(b,null,e)&&a.removeAttribute(e))});const s={onClick:'click',onFocus:'focus',onBlur:'blur',onChange:'change',onSubmit:'submit',onInput:'input',onResize:'resize',onScroll:'scroll',onWheel:'mousewheel',onMouseDown:'mousedown',onMouseUp:'mouseup',onMouseDown:'mousedown',onMouseMove:'mousemove',onMouseEnter:'mouseenter',onMouseOver:'mouseover',onMouseOut:'mouseout',onMouseLeave:'mouseleave',onTouchStart:'touchstart',onTouchEnd:'touchend',onTouchCancel:'touchcancel',onContextMenu:'Ccntextmenu',onDoubleClick:'dblclick',onDrag:'drag',onDragEnd:'dragend',onDragEnter:'dragenter',onDragExit:'dragexit',onDragLeave:'dragleave',onDragOver:'dragover',onDragStart:'Dragstart',onDrop:'drop',onLoad:'load',onCopy:'copy',onCut:'cut',onPaste:'paste',onCompositionEnd:'compositionend',onCompositionStart:'compositionstart',onCompositionUpdate:'compositionupdate',onKeyDown:'keydown',onKeyPress:'keypress',onKeyUp:'keyup',onAbort:'Abort',onCanPlay:'canplay',onCanPlayThrough:'canplaythrough',onDurationChange:'durationchange',onEmptied:'emptied',onEncrypted:'encrypted ',onEnded:'ended',onError:'error',onLoadedData:'loadeddata',onLoadedMetadata:'loadedmetadata',onLoadStart:'Loadstart',onPause:'pause',onPlay:'play ',onPlaying:'playing',onProgress:'progress',onRateChange:'ratechange',onSeeked:'seeked',onSeeking:'seeking',onStalled:'stalled',onSuspend:'suspend ',onTimeUpdate:'timeupdate',onVolumeChange:'volumechange',onWaiting:'waiting',onAnimationStart:'animationstart',onAnimationEnd:'animationend',onAnimationIteration:'animationiteration',onTransitionEnd:'transitionend'},t={accessKey:'accesskey',className:'class',contentEditable:'contenteditable',contextMenu:'contextmenu',dir:'dir',draggable:'draggable',dropZone:'dropzone',hidden:'hidden',id:'id',itemId:'itemid',itemProp:'itemprop',itemRef:'itemref',itemScope:'itemscope',itemType:'itemtype',lang:'lang',spellCheck:'spellcheck',tabIndex:'tabindex',title:'title',translate:'translate'};var u=render=(a,b={},...c)=>{if(null===b&&(b={}),'function'==typeof a)return new a(b).dom;const d=a,e='object'==typeof d,f=e?d.attributes||{}:{},g=Object.assign({},t,f),h=e?d.name:d,i=document.createElement(h);if(Object.keys(b).map((a)=>{a in g&&i.setAttribute(g[a],b[a]),a in s&&i.addEventListener(s[a],b[a])}),'style'in b){const a=b.style;Object.keys(a).map((b)=>{const c=a[b];if('number'==typeof c)i.style[b]=`${c}px`;else if('string'==typeof c)i.style[b]=c;else throw new Error(`Expected "number" or "string" but instead got "${typeof c}"`)})}return c.map((a)=>{if('object'==typeof a&&a instanceof HTMLElement)i.appendChild(a);else if('string'==typeof a||'number'==typeof a)i.appendChild(document.createTextNode(a));else throw new Error(`Expected "object" or "string" but instead got "${typeof value}"`)}),i},v='undefined'==typeof window?'undefined'==typeof global?'undefined'==typeof self?{}:self:global:window,w=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a,b){var c=[].slice;(function(c,d){return null===b?c.UrlPattern=d():a.exports=d()})(v,function(){var a,b,d,e,f,g,h,i,j,k,l,m,n,o,p;return j=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&')},h=function(a,b){var c,d,e;for(e=[],c=-1,d=a.length;++c<d;)e=e.concat(b(a[c]));return e},o=function(a,b){var c,d,e;for(e='',c=-1,d=a.length;++c<d;)e+=b(a[c]);return e},n=function(a){return new RegExp(a.toString()+'|').exec('').length-1},l=function(a,b){var c,d,e,f,g;for(f={},c=-1,e=a.length;++c<e;)(d=a[c],g=b[c],null!=g)&&(null==f[d]?f[d]=g:(!Array.isArray(f[d])&&(f[d]=[f[d]]),f[d].push(g)));return f},a={},a.Result=function(a,b){this.value=a,this.rest=b},a.Tagged=function(a,b){this.tag=a,this.value=b},a.tag=function(b,c){return function(d){var e,f;if(e=c(d),null!=e)return f=new a.Tagged(b,e.value),new a.Result(f,e.rest)}},a.regex=function(b){return function(c){var d,e;if(d=b.exec(c),null!=d)return e=d[0],new a.Result(e,c.slice(e.length))}},a.sequence=function(){var b;return b=1<=arguments.length?c.call(arguments,0):[],function(c){var d,e,f,g,h,i;for(d=-1,e=b.length,i=[],g=c;++d<e;){if(f=b[d],h=f(g),null==h)return;i.push(h.value),g=h.rest}return new a.Result(i,g)}},a.pick=function(){var b,d;return b=arguments[0],d=2<=arguments.length?c.call(arguments,1):[],function(c){var e,f;if(f=a.sequence.apply(a,d)(c),null!=f)return e=f.value,f.value=e[b],f}},a.string=function(b){var c;return c=b.length,function(d){if(d.slice(0,c)===b)return new a.Result(b,d.slice(c))}},a.lazy=function(a){var b;return b=null,function(c){return null==b&&(b=a()),b(c)}},a.baseMany=function(b,c,d,e,f){var g,h,i,j;for(i=f,j=d?'':[];!(null!=c&&(g=c(i),null!=g))&&(h=b(i),null!=h);)d?j+=h.value:j.push(h.value),i=h.rest;return e&&0===j.length?void 0:new a.Result(j,i)},a.many1=function(b){return function(c){return a.baseMany(b,null,!1,!0,c)}},a.concatMany1Till=function(b,c){return function(d){return a.baseMany(b,c,!0,!0,d)}},a.firstChoice=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],function(b){var c,d,e,f;for(c=-1,d=a.length;++c<d;)if(e=a[c],f=e(b),null!=f)return f}},m=function(b){var c;return c={},c.wildcard=a.tag('wildcard',a.string(b.wildcardChar)),c.optional=a.tag('optional',a.pick(1,a.string(b.optionalSegmentStartChar),a.lazy(function(){return c.pattern}),a.string(b.optionalSegmentEndChar))),c.name=a.regex(new RegExp('^['+b.segmentNameCharset+']+')),c.named=a.tag('named',a.pick(1,a.string(b.segmentNameStartChar),a.lazy(function(){return c.name}))),c.escapedChar=a.pick(1,a.string(b.escapeChar),a.regex(/^./)),c['static']=a.tag('static',a.concatMany1Till(a.firstChoice(a.lazy(function(){return c.escapedChar}),a.regex(/^./)),a.firstChoice(a.string(b.segmentNameStartChar),a.string(b.optionalSegmentStartChar),a.string(b.optionalSegmentEndChar),c.wildcard))),c.token=a.lazy(function(){return a.firstChoice(c.wildcard,c.optional,c.named,c['static'])}),c.pattern=a.many1(a.lazy(function(){return c.token})),c},i={escapeChar:'\\',segmentNameStartChar:':',segmentValueCharset:'a-zA-Z0-9-_~ %',segmentNameCharset:'a-zA-Z0-9',optionalSegmentStartChar:'(',optionalSegmentEndChar:')',wildcardChar:'*'},g=function(a,b){if(Array.isArray(a))return o(a,function(a){return g(a,b)});switch(a.tag){case'wildcard':return'(.*?)';case'named':return'(['+b+']+)';case'static':return j(a.value);case'optional':return'(?:'+g(a.value,b)+')?';}},f=function(a,b){return null==b&&(b=i.segmentValueCharset),'^'+g(a,b)+'$'},e=function(a){if(Array.isArray(a))return h(a,e);switch(a.tag){case'wildcard':return['_'];case'named':return[a.value];case'static':return[];case'optional':return e(a.value);}},k=function(a,b,c,d){var e,f,g,h;if(null==d&&(d=!1),h=a[b],null==h)if(d)throw new Error('no values provided for key `'+b+'`');else return;if(e=c[b]||0,f=Array.isArray(h)?h.length-1:0,e>f)if(d)throw new Error('too few values provided for key `'+b+'`');else return;return g=Array.isArray(h)?h[e]:h,d&&(c[b]=e+1),g},d=function(a,b,c){var e,f;if(Array.isArray(a)){for(e=-1,f=a.length;++e<f;)if(d(a[e],b,c))return!0;return!1}switch(a.tag){case'wildcard':return null!=k(b,'_',c,!1);case'named':return null!=k(b,a.value,c,!1);case'static':return!1;case'optional':return d(a.value,b,c);}},p=function(a,b,c){if(Array.isArray(a))return o(a,function(a){return p(a,b,c)});switch(a.tag){case'wildcard':return k(b,'_',c,!0);case'named':return k(b,a.value,c,!0);case'static':return a.value;case'optional':return d(a.value,b,c)?p(a.value,b,c):'';}},b=function(a,c){var d,g,h,j,k;if(a instanceof b)return this.isRegex=a.isRegex,this.regex=a.regex,this.ast=a.ast,void(this.names=a.names);if(this.isRegex=a instanceof RegExp,!('string'==typeof a||this.isRegex))throw new TypeError('argument must be a regex or a string');if(this.isRegex){if(this.regex=a,null!=c){if(!Array.isArray(c))throw new Error('if first argument is a regex the second argument may be an array of group names but you provided something else');if(d=n(this.regex),c.length!==d)throw new Error('regex contains '+d+' groups but array of group names contains '+c.length);this.names=c}return}if(''===a)throw new Error('argument must not be the empty string');if(k=a.replace(/\s+/g,''),k!==a)throw new Error('argument must not contain whitespace');if(g={escapeChar:(null==c?void 0:c.escapeChar)||i.escapeChar,segmentNameStartChar:(null==c?void 0:c.segmentNameStartChar)||i.segmentNameStartChar,segmentNameCharset:(null==c?void 0:c.segmentNameCharset)||i.segmentNameCharset,segmentValueCharset:(null==c?void 0:c.segmentValueCharset)||i.segmentValueCharset,optionalSegmentStartChar:(null==c?void 0:c.optionalSegmentStartChar)||i.optionalSegmentStartChar,optionalSegmentEndChar:(null==c?void 0:c.optionalSegmentEndChar)||i.optionalSegmentEndChar,wildcardChar:(null==c?void 0:c.wildcardChar)||i.wildcardChar},j=m(g),h=j.pattern(a),null==h)throw new Error('couldn\'t parse pattern');if(''!==h.rest)throw new Error('could only partially parse pattern');this.ast=h.value,this.regex=new RegExp(f(this.ast,g.segmentValueCharset)),this.names=e(this.ast)},b.prototype.match=function(a){var b,c;return(c=this.regex.exec(a),null==c)?null:(b=c.slice(1),this.names?l(this.names,b):b)},b.prototype.stringify=function(a){if(null==a&&(a={}),this.isRegex)throw new Error('can\'t stringify patterns generated from a regex');if(a!==Object(a))throw new Error('argument must be an object or undefined');return p(this.ast,a,{})},b.escapeForRegex=j,b.concatMap=h,b.stringConcatMap=o,b.regexGroupCount=n,b.keysAndValuesToObject=l,b.P=a,b.newParser=m,b.defaultOptions=i,b.astNodeToRegexString=f,b.astNodeToNames=e,b.getParam=k,b.astNodeContainsSegmentsForProvidedParams=d,b.stringify=p,b})});const x=Symbol('dispatch'),y=Symbol('pushState'),z=Symbol('saveRoute'),A=Symbol('findRoute');return{Component:class{constructor(a={}){this.props=a,this.dom=this.render(),this.store&&this.store.addUpdateListener&&this.store.addUpdateListener(()=>this.update())}update(){const a=this.render();this.dom&&(this.dom=r(this.dom,a))}},render:u,Router:class{constructor({opts:a={scrollRestoration:!0}}){this.opts=a,this.history=[],this.routes=[],window.addEventListener('popstate',(a)=>{this[x](a.state)}),document.body.addEventListener('click',(a)=>{const b=a.path||a.composedPath&&a.composedPath()||this.composedPath(a.target),c=b.find((a)=>a.dataset&&(''===a.dataset.route||'true'===a.dataset.route));c&&(a.preventDefault(),this[y]({url:c.pathname}))}),!0==!this.opts.scrollRestoration&&'scrollRestoration'in window.history&&(window.history.scrollRestoration='manual')}init(){this[y]({url:window.location.pathname})}on(...a){return a[0]&&'string'==typeof a[0]?this[z](a[0],a[1]):a[0]&&'object'==typeof a[0]&&Object.entries(a[0]).map((a)=>{this[z](a[0],a[1])}),this}composePath(a){for(let b=[];a;){if(b.push(a),'HTML'===a.tagName)return b.push(document),b.push(window),b;a=a.parentElement}}[x](a={}){if(a.url&&''!==a.url){const b=a.url,c=this[A](b);c&&c.action&&c.action(c.url.match(b))}}[y](a={}){a.url&&''!==a.url&&(window.history.pushState(a,'',a.url),this.history.push(a),this[x](a))}[z](a,b=function(){}){this[A](a)||this.routes.push({url:new w(a),action:b})}[A](a){return this.routes.find((b)=>a.match(b.url.regex))}}}});
